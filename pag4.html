<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Confirmare plată — ParkingApp</title>
  <link rel="stylesheet" href="css/pag3.css">
</head>
<body class="center">
  <section class="card confirm-card">
    <div class="success-icon" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M20 7L10 17l-6-6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h2 style="margin:0 0 6px">Plată efectuată cu succes!</h2>
    <p class="muted" id="methodLine">Metodă: —</p>
    <div class="sep"></div>

    <p><strong>Cod rezervare: <span id="codeOut">—</span></strong></p>
    <div id="breakdown" class="muted" style="margin-top:6px"></div>

    <div class="actions" style="justify-content:center;margin-top:18px">
      <a href="index.html" class="btn">Înapoi la Hartă</a>
    </div>
  </section>

  <script>
    const qs = new URLSearchParams(location.search);
    const method = (qs.get('method') || 'CARD').toUpperCase();
    const name   = qs.get('name') || '—';
    const minutes= Number(qs.get('minutes') || 60);
    const price  = Number(qs.get('price') || 0);
    const hours  = (minutes/60);
    const rate   = hours ? price/hours : 0;

    const fmtRON = n => new Intl.NumberFormat('ro-RO',{style:'currency',currency:'RON'}).format(Number(n||0));

    document.getElementById('methodLine').textContent = 'Metodă: ' + method;
    document.getElementById('codeOut').textContent = 'BRV-' + Date.now().toString(36).toUpperCase();
    document.getElementById('breakdown').innerHTML = `
      <div><strong>Parcare:</strong> ${name}</div>
      <div><strong>Durată:</strong> ${minutes} minute (${hours.toFixed(2)} h)</div>
      <div><strong>Tarif/oră:</strong> ${rate ? fmtRON(rate)+'/h' : '—'}</div>
      <div><strong>Total:</strong> ${fmtRON(price)}</div>
    `;
  </script>
</body>
</html>
